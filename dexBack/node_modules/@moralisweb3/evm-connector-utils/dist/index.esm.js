import{EvmProviderEvent,EvmAddress,EvmChain,LoggerController,MoralisNetworkConnectorError,NetworkConnectorErrorCode}from"@moralisweb3/core";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function __awaiter(e,i,s,a){return new(s=s||Promise)(function(n,t){function o(e){try{c(a.next(e))}catch(e){t(e)}}function r(e){try{c(a.throw(e))}catch(e){t(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,r)}c((a=a.apply(e,i||[])).next())})}function __generator(o,r){var c,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(c)throw new TypeError("Generator is already executing.");for(;a;)try{if(c=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(o,a)}catch(e){t=[6,e],i=0}finally{c=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var EvmConnectorEvent,eventemitter3={exports:{}},EventEmitter=(!function(e){var o=Object.prototype.hasOwnProperty,f="~";function n(){}function c(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,n,o,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new c(n,o||e,r),o=f?f+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],n]:e._events[o].push(n):(e._events[o]=n,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function t(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(f=!1)),t.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},t.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,o=t.length,r=new Array(o);n<o;n++)r[n]=t[n].fn;return r},t.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},t.prototype.emit=function(e,t,n,o,r,c){var i=f?f+e:e;if(!this._events[i])return!1;var s,a=this._events[i],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,t),!0;case 3:return a.fn.call(a.context,t,n),!0;case 4:return a.fn.call(a.context,t,n,o),!0;case 5:return a.fn.call(a.context,t,n,o,r),!0;case 6:return a.fn.call(a.context,t,n,o,r,c),!0}for(p=1,s=new Array(l-1);p<l;p++)s[p-1]=arguments[p];a.fn.apply(a.context,s)}else for(var u,h=a.length,p=0;p<h;p++)switch(a[p].once&&this.removeListener(e,a[p].fn,void 0,!0),l){case 1:a[p].fn.call(a[p].context);break;case 2:a[p].fn.call(a[p].context,t);break;case 3:a[p].fn.call(a[p].context,t,n);break;case 4:a[p].fn.call(a[p].context,t,n,o);break;default:if(!s)for(u=1,s=new Array(l-1);u<l;u++)s[u-1]=arguments[u];a[p].fn.apply(a[p].context,s)}return!0},t.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},t.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},t.prototype.removeListener=function(e,t,n,o){e=f?f+e:e;if(!this._events[e])return this;if(!t)return a(this,e),this;var r=this._events[e];if(r.fn)r.fn!==t||o&&!r.once||n&&r.context!==n||a(this,e);else{for(var c=0,i=[],s=r.length;c<s;c++)(r[c].fn!==t||o&&!r[c].once||n&&r[c].context!==n)&&i.push(r[c]);i.length?this._events[e]=1===i.length?i[0]:i:a(this,e)}return this},t.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=f,e.exports=t.EventEmitter=t}(eventemitter3),eventemitter3.exports),EvmAbstractConnector=(!function(e){e.CONNECT="connect",e.DISCONNECT="disconnect",e.CHAIN_CHANGED="chainChanged",e.ACCOUNT_CHANGED="accountChanged"}(EvmConnectorEvent=EvmConnectorEvent||{}),function(o){function e(e,t){var n=o.call(this)||this;return n.name=e,n.core=t,n.network="evm",n._provider=null,n._chain=null,n._account=null,n.name=e,n.logger=new LoggerController(n.core.config,"evmConnector: ".concat(n.name)),n.handleAccountsChanged=n.handleAccountsChanged.bind(n),n.handleChainChanged=n.handleChainChanged.bind(n),n.handleConnect=n.handleConnect.bind(n),n.handleDisconnect=n.handleDisconnect.bind(n),n}return __extends(e,o),Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chain",{get:function(){return this._chain},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"account",{get:function(){return this._account},enumerable:!1,configurable:!0}),e.prototype.connect=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.createConnection(n)];case 1:return t=e.sent(),this._account=t.account,this._chain=t.chain,[2,t]}})})},e.prototype.getProvider=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this._provider?[3,2]:[4,(t=this).createProvider(n)];case 1:t._provider=e.sent(),this.subscribeToEvents(this._provider),e.label=2;case 2:return[2,this._provider]}})})},e.prototype.subscribeToEvents=function(e){e.on(EvmProviderEvent.CHAIN_CHANGED,this.handleChainChanged),e.on(EvmProviderEvent.ACCOUNTS_CHANGED,this.handleAccountsChanged),e.on(EvmProviderEvent.CONNECT,this.handleConnect),e.on(EvmProviderEvent.DISCONNECT,this.handleDisconnect)},e.prototype.handleAccountsChanged=function(e){0!==e.length&&(this._account=EvmAddress.create(e[0]),this.emit(EvmConnectorEvent.ACCOUNT_CHANGED,this.account))},e.prototype.handleChainChanged=function(e){e=EvmChain.create(e);this._chain=e,this.emit(EvmConnectorEvent.CHAIN_CHANGED,e)},e.prototype.handleConnect=function(e){this.emit(EvmConnectorEvent.CONNECT,e)},e.prototype.handleDisconnect=function(e){this.emit(EvmConnectorEvent.DISCONNECT,e)},e.prototype.cancelRequest=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new MoralisNetworkConnectorError({code:NetworkConnectorErrorCode.NOT_IMPLEMENTED,message:"cancelRequest() is not implemented"})})})},e}(EventEmitter)),getMoralisRpcs=function(e){return{1:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/eth/mainnet"),3:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/eth/ropsten"),4:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/eth/rinkeby"),5:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/eth/goerli"),42:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/eth/kovan"),137:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/polygon/mainnet"),80001:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/polygon/mumbai"),56:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/bsc/mainnet"),97:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/bsc/testnet"),43114:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/avalanche/mainnet"),43113:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/avalanche/testnet"),250:"https://speedy-nodes-nyc.moralis.io/".concat(e,"/fantom/mainnet")}},getMoralisRpc=function(e,t){e=getMoralisRpcs(e),t=EvmChain.create(t).decimal,e=Object.keys(e).map(function(e){return+e});if(!e.includes(t))throw new MoralisNetworkConnectorError({code:NetworkConnectorErrorCode.INVALID_ARGUMENT,message:"Invalid chainId. Supported chains: ".concat(e.join(", "))})};export{EvmAbstractConnector,EvmConnectorEvent,getMoralisRpc,getMoralisRpcs};
//# sourceMappingURL=index.esm.js.map
